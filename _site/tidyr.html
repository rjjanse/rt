<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<<<<<<< Updated upstream
<meta name="generator" content="quarto-1.5.57">
=======
<meta name="generator" content="quarto-1.3.306">
>>>>>>> Stashed changes

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<<<<<<< Updated upstream
<title>Tidyr</title>
=======
<title>External data</title>
>>>>>>> Stashed changes
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
<<<<<<< Updated upstream
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
=======
>>>>>>> Stashed changes
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
<<<<<<< Updated upstream
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
=======
  "limit": 20,
>>>>>>> Stashed changes
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
<<<<<<< Updated upstream
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
=======
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
>>>>>>> Stashed changes
  }
}</script>


</head>

<body class="nav-sidebar floating">

<<<<<<< Updated upstream
=======

>>>>>>> Stashed changes
<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
<<<<<<< Updated upstream
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./tidyverse.html">Into the tidyverse</a></li><li class="breadcrumb-item"><a href="./tidyr.html">Tidyr</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
=======
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./tidyverse.html">Into the tidyverse</a></li><li class="breadcrumb-item"><a href="./tidyr.html">External data</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
>>>>>>> Stashed changes
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<<<<<<< Updated upstream
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
=======
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
>>>>>>> Stashed changes
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
<<<<<<< Updated upstream
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Start</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
=======
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Start</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
>>>>>>> Stashed changes
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
<<<<<<< Updated upstream
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Set-up</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
=======
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Set-up</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
>>>>>>> Stashed changes
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rstudio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">RStudio</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
<<<<<<< Updated upstream
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">The basics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
=======
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">The basics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
>>>>>>> Stashed changes
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./creating.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Creating data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./using.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">External data</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
<<<<<<< Updated upstream
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Into the tidyverse</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
=======
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Into the tidyverse</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
>>>>>>> Stashed changes
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tidyverse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tidyverse</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dplyr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dplyr</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tidyr.html" class="sidebar-item-text sidebar-link active">
<<<<<<< Updated upstream
 <span class="menu-text">Tidyr</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./magrittr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Magrittr</span></a>
  </div>
</li>
=======
 <span class="menu-text">External data</span></a>
  </div>
</li>
          <li class="sidebar-item">
 <span class="menu-text">magrittr.qmd</span>
  </li>
>>>>>>> Stashed changes
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
<<<<<<< Updated upstream
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">New skills</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
=======
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Into the multiverse</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
>>>>>>> Stashed changes
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
<<<<<<< Updated upstream
  <div class="sidebar-item-container"> 
  <a href="./plotting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Plotting</span></a>
  </div>
</li>
=======
 <span class="menu-text">datatable.qmd</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">shiny.qmd</span>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">New skills</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
>>>>>>> Stashed changes
          <li class="sidebar-item">
 <span class="menu-text">random.qmd</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">functions.qmd</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">looping.qmd</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">iterating.qmd</span>
  </li>
          <li class="sidebar-item">
<<<<<<< Updated upstream
  <div class="sidebar-item-container"> 
  <a href="./regex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regex</span></a>
  </div>
</li>
=======
 <span class="menu-text">regex.qmd</span>
  </li>
>>>>>>> Stashed changes
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
<<<<<<< Updated upstream
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Workflow</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
=======
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">Workflow</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
>>>>>>> Stashed changes
          <li class="sidebar-item">
 <span class="menu-text">scripts.qmd</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">rmarkdown.qmd</span>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
<<<<<<< Updated upstream
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Parts of a paper</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
=======
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
 <span class="menu-text">General use</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
>>>>>>> Stashed changes
          <li class="sidebar-item">
 <span class="menu-text">regression.qmd</span>
  </li>
          <li class="sidebar-item">
<<<<<<< Updated upstream
 <span class="menu-text">table1.qmd</span>
  </li>
=======
 <span class="menu-text">plotting.qmd</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">table1.qmd</span>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">
 <span class="menu-text">Specific use</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
>>>>>>> Stashed changes
          <li class="sidebar-item">
 <span class="menu-text">imputation.qmd</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">confounding.qmd</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">prediction.qmd</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">competing_risks.qmd</span>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
<<<<<<< Updated upstream
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">Into the multiverse</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datatable.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">data.table</span></a>
  </div>
</li>
          <li class="sidebar-item">
 <span class="menu-text">shiny.qmd</span>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true">
 <span class="menu-text">Recap</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
=======
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">
 <span class="menu-text">Recap</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
>>>>>>> Stashed changes
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Summary</span></a>
  </div>
</li>
          <li class="sidebar-item">
 <span class="menu-text">rython.qmd</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">slow.qmd</span>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<<<<<<< Updated upstream
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#tidyr" id="toc-tidyr" class="nav-link active" data-scroll-target="#tidyr">Tidyr</a></li>
  <li><a href="#reshaping-data" id="toc-reshaping-data" class="nav-link" data-scroll-target="#reshaping-data">Reshaping data</a>
  <ul>
  <li><a href="#wide-to-long" id="toc-wide-to-long" class="nav-link" data-scroll-target="#wide-to-long">Wide to long</a></li>
  <li><a href="#long-to-wide" id="toc-long-to-wide" class="nav-link" data-scroll-target="#long-to-wide">Long to wide</a></li>
  </ul></li>
  <li><a href="#filling-in-nas" id="toc-filling-in-nas" class="nav-link" data-scroll-target="#filling-in-nas">Filling in <code>NA</code>’s</a>
  <ul>
  <li><a href="#single-value-for-a-whole-column" id="toc-single-value-for-a-whole-column" class="nav-link" data-scroll-target="#single-value-for-a-whole-column">Single value for a whole column</a></li>
  <li><a href="#based-on-other-values-in-column" id="toc-based-on-other-values-in-column" class="nav-link" data-scroll-target="#based-on-other-values-in-column">Based on other values in column</a></li>
  </ul></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises">Exercises</a>
  <ul>
  <li><a href="#continue-storm-category" id="toc-continue-storm-category" class="nav-link" data-scroll-target="#continue-storm-category">1. Continue storm category</a></li>
  <li><a href="#indicate-non-hurricanes" id="toc-indicate-non-hurricanes" class="nav-link" data-scroll-target="#indicate-non-hurricanes">2. Indicate non-hurricanes</a></li>
  </ul></li>
  <li><a href="#next-topic" id="toc-next-topic" class="nav-link" data-scroll-target="#next-topic">Next topic</a></li>
  </ul>
</nav>
=======
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
>>>>>>> Stashed changes
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<<<<<<< Updated upstream
<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./tidyverse.html">Into the tidyverse</a></li><li class="breadcrumb-item"><a href="./tidyr.html">Tidyr</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Tidyr</h1>
=======
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">External data</h1>
>>>>>>> Stashed changes
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

<<<<<<< Updated upstream

</header>


<section id="tidyr" class="level2">
<h2 class="anchored" data-anchor-id="tidyr">Tidyr</h2>
<p><code>{tidyr}</code> is a package from the tidyverse that is meant to help you tidy up your data. What is considered ‘tidy’ data can be read in <code>vignette("tidy-data")</code>. In short, tidy data helps you use <code>{dplyr}</code> and other tidyverse tools in a way that lets you spend less time on structuring your data and more on performing your analyses.</p>
</section>
<section id="reshaping-data" class="level2">
<h2 class="anchored" data-anchor-id="reshaping-data">Reshaping data</h2>
<section id="wide-to-long" class="level3">
<h3 class="anchored" data-anchor-id="wide-to-long">Wide to long</h3>
<p>Some analyses require data in long format (i.e.&nbsp;one study participant can have multiple observations which are represented by multiple rows) while data might be retrieved in wide format (i.e.&nbsp;one study participant can have multiple observations which are represented by multiple columns). In such a case, <code>{tidyr}</code> offers us <code>pivot_longer()</code>.</p>
<p>We can use <code>pivot_longer()</code> in a number of ways, but we must always supply the data in the argument <code>data</code>, and the columns to be pivoted in <code>cols</code>. In the simplest cases, this will suffice.</p>
<p>As an example, let’s look at <code>billboard</code>, a dataset available through <code>{tidyr}</code>. <code>billboard</code> contains songs ranking the top 100 in the year 2000 with their position in each week after entering the top 100 (wk).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Load tidyr</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(<span class="st">"tidyr"</span>)</span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co"># What does billboard look like?</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">head</span>(billboard)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 79
  artist      track date.entered   wk1   wk2   wk3   wk4   wk5   wk6   wk7   wk8
  &lt;chr&gt;       &lt;chr&gt; &lt;date&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 2 Pac       Baby… 2000-02-26      87    82    72    77    87    94    99    NA
2 2Ge+her     The … 2000-09-02      91    87    92    NA    NA    NA    NA    NA
3 3 Doors Do… Kryp… 2000-04-08      81    70    68    67    66    57    54    53
4 3 Doors Do… Loser 2000-10-21      76    76    72    69    67    65    55    59
5 504 Boyz    Wobb… 2000-04-15      57    34    25    17    17    31    36    49
6 98^0        Give… 2000-08-19      51    39    34    26    26    19     2     2
# ℹ 68 more variables: wk9 &lt;dbl&gt;, wk10 &lt;dbl&gt;, wk11 &lt;dbl&gt;, wk12 &lt;dbl&gt;,
#   wk13 &lt;dbl&gt;, wk14 &lt;dbl&gt;, wk15 &lt;dbl&gt;, wk16 &lt;dbl&gt;, wk17 &lt;dbl&gt;, wk18 &lt;dbl&gt;,
#   wk19 &lt;dbl&gt;, wk20 &lt;dbl&gt;, wk21 &lt;dbl&gt;, wk22 &lt;dbl&gt;, wk23 &lt;dbl&gt;, wk24 &lt;dbl&gt;,
#   wk25 &lt;dbl&gt;, wk26 &lt;dbl&gt;, wk27 &lt;dbl&gt;, wk28 &lt;dbl&gt;, wk29 &lt;dbl&gt;, wk30 &lt;dbl&gt;,
#   wk31 &lt;dbl&gt;, wk32 &lt;dbl&gt;, wk33 &lt;dbl&gt;, wk34 &lt;dbl&gt;, wk35 &lt;dbl&gt;, wk36 &lt;dbl&gt;,
#   wk37 &lt;dbl&gt;, wk38 &lt;dbl&gt;, wk39 &lt;dbl&gt;, wk40 &lt;dbl&gt;, wk41 &lt;dbl&gt;, wk42 &lt;dbl&gt;,
#   wk43 &lt;dbl&gt;, wk44 &lt;dbl&gt;, wk45 &lt;dbl&gt;, wk46 &lt;dbl&gt;, wk47 &lt;dbl&gt;, wk48 &lt;dbl&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># Pivot billboard to long format</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>billboard_long <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(billboard, wk1<span class="sc">:</span>wk76)</span>
<span id="cb3-3"><a href="#cb3-3"></a></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co"># Reprint billboard</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="fu">head</span>(billboard_long)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  artist track                   date.entered name  value
  &lt;chr&gt;  &lt;chr&gt;                   &lt;date&gt;       &lt;chr&gt; &lt;dbl&gt;
1 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk1      87
2 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk2      82
3 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk3      72
4 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk4      77
5 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk5      87
6 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk6      94</code></pre>
</div>
</div>
<p>We can see that the data now has much less columns (5 as opposed to 79 previously). Instead, the number of rows has been increased: each row now corresponds to a week for each song. The weeks were put into a column called ‘name’ by default, and the values that were in the original week columns went into a column called ‘value’ by default.</p>
<p>We can of course change the names of those columns:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># Pivot billboard to long format</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>billboard_long <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(billboard, wk1<span class="sc">:</span>wk76, <span class="at">names_to =</span> <span class="st">"week"</span>, <span class="at">values_to =</span> <span class="st">"position"</span>)</span>
<span id="cb5-3"><a href="#cb5-3"></a></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co"># Reprint billboard</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="fu">head</span>(billboard_long)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  artist track                   date.entered week  position
  &lt;chr&gt;  &lt;chr&gt;                   &lt;date&gt;       &lt;chr&gt;    &lt;dbl&gt;
1 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk1         87
2 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk2         82
3 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk3         72
4 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk4         77
5 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk5         87
6 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk6         94</code></pre>
</div>
</div>
<p>Currently, the week numbers are in the column called ‘week’, but are represented as a character string because the characters ‘wk’ are present in all columns. Although we will learn how to manipulate this in <a href="./regex.html">Regex</a>, we can prevent this while calling the function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># Pivot billboard to long format</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>billboard_long <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(billboard, wk1<span class="sc">:</span>wk76, <span class="at">names_to =</span> <span class="st">"week"</span>, <span class="at">values_to =</span> <span class="st">"position"</span>, <span class="at">names_prefix =</span> <span class="st">"wk"</span>)</span>
<span id="cb7-3"><a href="#cb7-3"></a></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="co"># Reprint billboard</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="fu">head</span>(billboard_long)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  artist track                   date.entered week  position
  &lt;chr&gt;  &lt;chr&gt;                   &lt;date&gt;       &lt;chr&gt;    &lt;dbl&gt;
1 2 Pac  Baby Don't Cry (Keep... 2000-02-26   1           87
2 2 Pac  Baby Don't Cry (Keep... 2000-02-26   2           82
3 2 Pac  Baby Don't Cry (Keep... 2000-02-26   3           72
4 2 Pac  Baby Don't Cry (Keep... 2000-02-26   4           77
5 2 Pac  Baby Don't Cry (Keep... 2000-02-26   5           87
6 2 Pac  Baby Don't Cry (Keep... 2000-02-26   6           94</code></pre>
</div>
</div>
<p>Although we have numbers now, they are still of class ‘character’. However, we can specify the type they should be using <code>names_transform</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># Pivot billboard to long format</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>billboard_long <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(billboard, wk1<span class="sc">:</span>wk76, <span class="at">names_to =</span> <span class="st">"week"</span>, <span class="at">values_to =</span> <span class="st">"position"</span>, <span class="at">names_prefix =</span> <span class="st">"wk"</span>, <span class="at">names_transform =</span> as.numeric)</span>
<span id="cb9-3"><a href="#cb9-3"></a></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="co"># Reprint billboard</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="fu">head</span>(billboard_long)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  artist track                   date.entered  week position
  &lt;chr&gt;  &lt;chr&gt;                   &lt;date&gt;       &lt;dbl&gt;    &lt;dbl&gt;
1 2 Pac  Baby Don't Cry (Keep... 2000-02-26       1       87
2 2 Pac  Baby Don't Cry (Keep... 2000-02-26       2       82
3 2 Pac  Baby Don't Cry (Keep... 2000-02-26       3       72
4 2 Pac  Baby Don't Cry (Keep... 2000-02-26       4       77
5 2 Pac  Baby Don't Cry (Keep... 2000-02-26       5       87
6 2 Pac  Baby Don't Cry (Keep... 2000-02-26       6       94</code></pre>
</div>
</div>
<p>This kind of control gives us much less head-ache when, for instance, we want to use the data for plotting (for which we will discuss the code in <a href="./plotting.html">Plotting</a>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># Load packages</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(<span class="st">"dplyr"</span>,   <span class="co"># Data wrangling</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>               <span class="st">"ggplot2"</span>  <span class="co"># Data visualization</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>)</span>
<span id="cb11-5"><a href="#cb11-5"></a></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="co"># Get only Britney Spears songs</span></span>
<span id="cb11-7"><a href="#cb11-7"></a>dat_plot <span class="ot">&lt;-</span> <span class="fu">filter</span>(billboard_long, artist <span class="sc">==</span> <span class="st">"Spears, Britney"</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(position))</span>
<span id="cb11-8"><a href="#cb11-8"></a></span>
<span id="cb11-9"><a href="#cb11-9"></a><span class="co"># Create plot</span></span>
<span id="cb11-10"><a href="#cb11-10"></a><span class="fu">ggplot</span>(dat_plot, <span class="fu">aes</span>(<span class="at">x =</span> week, <span class="at">y =</span> position, <span class="at">colour =</span> track)) <span class="sc">+</span></span>
<span id="cb11-11"><a href="#cb11-11"></a>    <span class="co"># Geometries</span></span>
<span id="cb11-12"><a href="#cb11-12"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb11-13"><a href="#cb11-13"></a>    <span class="co"># Scaling</span></span>
<span id="cb11-14"><a href="#cb11-14"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb11-15"><a href="#cb11-15"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb11-16"><a href="#cb11-16"></a>    <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#d3b866"</span>, <span class="st">"#e09373"</span>, <span class="st">"#e586b4"</span>)) <span class="sc">+</span> </span>
<span id="cb11-17"><a href="#cb11-17"></a>    <span class="co"># Aesthetics</span></span>
<span id="cb11-18"><a href="#cb11-18"></a>    <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb11-19"><a href="#cb11-19"></a>          <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">"#002b36"</span>, <span class="at">fill =</span> <span class="st">"#002b36"</span>),</span>
<span id="cb11-20"><a href="#cb11-20"></a>          <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">"#002b36"</span>, <span class="at">fill =</span> <span class="st">"#002b36"</span>),</span>
<span id="cb11-21"><a href="#cb11-21"></a>          <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">"#dee2e6"</span>),</span>
<span id="cb11-22"><a href="#cb11-22"></a>          <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">"#dee2e6"</span>),</span>
<span id="cb11-23"><a href="#cb11-23"></a>          <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"#dee2e6"</span>),</span>
<span id="cb11-24"><a href="#cb11-24"></a>          <span class="at">axis.ticks =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"#dee2e6"</span>),</span>
<span id="cb11-25"><a href="#cb11-25"></a>          <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">"#dee2e6"</span>),</span>
<span id="cb11-26"><a href="#cb11-26"></a>          <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb11-27"><a href="#cb11-27"></a>          <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">"#002b36"</span>, <span class="at">fill =</span> <span class="st">"#002b36"</span>),</span>
<span id="cb11-28"><a href="#cb11-28"></a>          <span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="tidyr_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="long-to-wide" class="level3">
<h3 class="anchored" data-anchor-id="long-to-wide">Long to wide</h3>
<p>We can also reshape data from longer to wider format using <code>pivot_wider()</code>. We can simply do this by defining which column contains the name and which column contains the values. We can append the final name of the columns using the <code>names_prefix</code> argument.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># Pivot data to wider formar</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>billboard_wide <span class="ot">&lt;-</span> <span class="fu">pivot_wider</span>(billboard_long, <span class="at">names_from =</span> week, <span class="at">values_from =</span> position, <span class="at">names_prefix =</span> <span class="st">"wk"</span>)</span>
<span id="cb12-3"><a href="#cb12-3"></a></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="co"># Preview data</span></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="fu">head</span>(billboard_wide)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 79
  artist      track date.entered   wk1   wk2   wk3   wk4   wk5   wk6   wk7   wk8
  &lt;chr&gt;       &lt;chr&gt; &lt;date&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 2 Pac       Baby… 2000-02-26      87    82    72    77    87    94    99    NA
2 2Ge+her     The … 2000-09-02      91    87    92    NA    NA    NA    NA    NA
3 3 Doors Do… Kryp… 2000-04-08      81    70    68    67    66    57    54    53
4 3 Doors Do… Loser 2000-10-21      76    76    72    69    67    65    55    59
5 504 Boyz    Wobb… 2000-04-15      57    34    25    17    17    31    36    49
6 98^0        Give… 2000-08-19      51    39    34    26    26    19     2     2
# ℹ 68 more variables: wk9 &lt;dbl&gt;, wk10 &lt;dbl&gt;, wk11 &lt;dbl&gt;, wk12 &lt;dbl&gt;,
#   wk13 &lt;dbl&gt;, wk14 &lt;dbl&gt;, wk15 &lt;dbl&gt;, wk16 &lt;dbl&gt;, wk17 &lt;dbl&gt;, wk18 &lt;dbl&gt;,
#   wk19 &lt;dbl&gt;, wk20 &lt;dbl&gt;, wk21 &lt;dbl&gt;, wk22 &lt;dbl&gt;, wk23 &lt;dbl&gt;, wk24 &lt;dbl&gt;,
#   wk25 &lt;dbl&gt;, wk26 &lt;dbl&gt;, wk27 &lt;dbl&gt;, wk28 &lt;dbl&gt;, wk29 &lt;dbl&gt;, wk30 &lt;dbl&gt;,
#   wk31 &lt;dbl&gt;, wk32 &lt;dbl&gt;, wk33 &lt;dbl&gt;, wk34 &lt;dbl&gt;, wk35 &lt;dbl&gt;, wk36 &lt;dbl&gt;,
#   wk37 &lt;dbl&gt;, wk38 &lt;dbl&gt;, wk39 &lt;dbl&gt;, wk40 &lt;dbl&gt;, wk41 &lt;dbl&gt;, wk42 &lt;dbl&gt;,
#   wk43 &lt;dbl&gt;, wk44 &lt;dbl&gt;, wk45 &lt;dbl&gt;, wk46 &lt;dbl&gt;, wk47 &lt;dbl&gt;, wk48 &lt;dbl&gt;, …</code></pre>
</div>
</div>
<p>This returns the data to its original state (note that missings cannot be compared):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># Compare all individual values in the data frames</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="fu">table</span>(billboard <span class="sc">==</span> billboard_wide, <span class="at">useNA =</span> <span class="st">"always"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 TRUE  &lt;NA&gt; 
 6258 18785 </code></pre>
</div>
</div>
</section>
</section>
<section id="filling-in-nas" class="level2">
<h2 class="anchored" data-anchor-id="filling-in-nas">Filling in <code>NA</code>’s</h2>
<section id="single-value-for-a-whole-column" class="level3">
<h3 class="anchored" data-anchor-id="single-value-for-a-whole-column">Single value for a whole column</h3>
<p>Sometimes, we have missing values in columns (i.e.&nbsp;<code>NA</code>’s), that we want to change. This can be due to some assumptions we have made (e.g.&nbsp;absence of a diagnostic code in a health record means absence of the corresponding disease), because we want to name our missings something different than <code>NA</code>, or because we otherwise know what these values should be (e.g.&nbsp;an artificial indicator).</p>
<p>To do this, we can use the function <code>replace_na()</code>, which allows us to specify what missing values should be for each individual column specified. As an example, we will change missing values in the <code>billboard</code> data to -1 for the weeks 20 and 21, to indicate the song was no longer in the top 100 in the week specified by that column.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="co"># Change NAs in weeks 66 and 67</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>billboard_replaced <span class="ot">&lt;-</span> <span class="fu">replace_na</span>(billboard, <span class="fu">list</span>(<span class="at">wk20 =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">wk21 =</span> <span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb16-3"><a href="#cb16-3"></a></span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="co"># Show that these values now exist where missing data first existed for week 20</span></span>
<span id="cb16-5"><a href="#cb16-5"></a><span class="fu">table</span>(billboard[[<span class="st">"wk20"</span>]], <span class="at">useNA =</span> <span class="st">"always"</span>); <span class="fu">table</span>(billboard_replaced[[<span class="st">"wk20"</span>]], <span class="at">useNA =</span> <span class="st">"always"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   2    3    4    5    6    7    9   10   11   12   14   15   16   18   19   20 
   2    2    3    2    1    2    1    4    1    2    4    4    1    1    1    3 
  21   22   23   25   26   28   30   33   34   35   39   40   42   43   45   46 
   1    2    3    4    3    1    3    1    2    1    1    1    2    1    1    1 
  48   49   50   51   53   54   56   58   59   61   62   66   67   68   69   70 
   1    1    2    1    1    2    1    2    3    1    3    2    1    2    1    3 
  71   72   74   77   78   79   82   83   84   85   86   87   88   89   90   91 
   1    1    1    2    2    2    1    1    1    1    4    5    2    6    4    3 
  92   93   94   95   96   97   98   99  100 &lt;NA&gt; 
   2    1    2    3    1    2    1    3    5  171 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  -1    2    3    4    5    6    7    9   10   11   12   14   15   16   18   19 
 171    2    2    3    2    1    2    1    4    1    2    4    4    1    1    1 
  20   21   22   23   25   26   28   30   33   34   35   39   40   42   43   45 
   3    1    2    3    4    3    1    3    1    2    1    1    1    2    1    1 
  46   48   49   50   51   53   54   56   58   59   61   62   66   67   68   69 
   1    1    1    2    1    1    2    1    2    3    1    3    2    1    2    1 
  70   71   72   74   77   78   79   82   83   84   85   86   87   88   89   90 
   3    1    1    1    2    2    2    1    1    1    1    4    5    2    6    4 
  91   92   93   94   95   96   97   98   99  100 &lt;NA&gt; 
   3    2    1    2    3    1    2    1    3    5    0 </code></pre>
</div>
</div>
</section>
<section id="based-on-other-values-in-column" class="level3">
<h3 class="anchored" data-anchor-id="based-on-other-values-in-column">Based on other values in column</h3>
<p>In some cases, we want to copy the value of a certain column to other, missing rows in that column. As an example, this could be the case of biological sex at birth is recorded only in a first study visit, even though biological sex at birth remains constant over time (because birth only occurs once). For this, we can use the <code>fill()</code> function.</p>
<p>The <code>fill()</code> function allows us to fill the value in a column. We can specify one of four directions for how the filling occurrs. Note this example data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="co"># Create example data for fill()</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>dat_fill <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>),</span>
<span id="cb19-3"><a href="#cb19-3"></a>                   <span class="at">visit =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">4</span>),</span>
<span id="cb19-4"><a href="#cb19-4"></a>                   <span class="at">bio_sex_birth =</span> <span class="fu">c</span>(<span class="st">"male"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"female"</span>, <span class="cn">NA</span>, </span>
<span id="cb19-5"><a href="#cb19-5"></a>                                     <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"male"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>))</span>
<span id="cb19-6"><a href="#cb19-6"></a></span>
<span id="cb19-7"><a href="#cb19-7"></a><span class="co"># Show data</span></span>
<span id="cb19-8"><a href="#cb19-8"></a>dat_fill</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 3
      id visit bio_sex_birth
   &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;        
 1     1     1 male         
 2     1     2 &lt;NA&gt;         
 3     1     3 &lt;NA&gt;         
 4     2     1 &lt;NA&gt;         
 5     2     2 female       
 6     2     3 &lt;NA&gt;         
 7     3     1 &lt;NA&gt;         
 8     3     2 &lt;NA&gt;         
 9     3     3 &lt;NA&gt;         
10     4     1 male         
11     4     2 &lt;NA&gt;         
12     4     3 &lt;NA&gt;         </code></pre>
</div>
</div>
<p>We can see that for three individuals, we know their biological sex at birth, for one individual, this information was recored at visit 2 (ID 2), and for one individual (ID 3), this information is missing. To fill in these missing values, we can use <code>fill()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="co"># Fill missing values downwards</span></span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="fu">fill</span>(dat_fill, bio_sex_birth, <span class="at">.direction =</span> <span class="st">"down"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 3
      id visit bio_sex_birth
   &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;        
 1     1     1 male         
 2     1     2 male         
 3     1     3 male         
 4     2     1 male         
 5     2     2 female       
 6     2     3 female       
 7     3     1 female       
 8     3     2 female       
 9     3     3 female       
10     4     1 male         
11     4     2 male         
12     4     3 male         </code></pre>
</div>
</div>
<p>When the fill direction is down, we can see that each value is only filled in downwards. The downwards direction poses a problem for individual 2 that now switches biological sex at birth, which should not be possible.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="co"># Fill missing values upwards</span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="fu">fill</span>(dat_fill, bio_sex_birth, <span class="at">.direction =</span> <span class="st">"up"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 3
      id visit bio_sex_birth
   &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;        
 1     1     1 male         
 2     1     2 female       
 3     1     3 female       
 4     2     1 female       
 5     2     2 female       
 6     2     3 male         
 7     3     1 male         
 8     3     2 male         
 9     3     3 male         
10     4     1 male         
11     4     2 &lt;NA&gt;         
12     4     3 &lt;NA&gt;         </code></pre>
</div>
</div>
<p>When the fill direction is up, we just fill upwards, which means that individual 4 does not get their missing values filled in.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="co"># Fill missing values downwards then upwards</span></span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="fu">fill</span>(dat_fill, bio_sex_birth, <span class="at">.direction =</span> <span class="st">"downup"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 3
      id visit bio_sex_birth
   &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;        
 1     1     1 male         
 2     1     2 male         
 3     1     3 male         
 4     2     1 male         
 5     2     2 female       
 6     2     3 female       
 7     3     1 female       
 8     3     2 female       
 9     3     3 female       
10     4     1 male         
11     4     2 male         
12     4     3 male         </code></pre>
</div>
</div>
<p>The direction downup simply means that first we fill downwards and then upwards, meaning that when the filling upwards occurs, there are already some <code>NA</code>’s filled in by the downward filling.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="co"># Fill missing values upwards then downwards</span></span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="fu">fill</span>(dat_fill, bio_sex_birth, <span class="at">.direction =</span> <span class="st">"updown"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 3
      id visit bio_sex_birth
   &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;        
 1     1     1 male         
 2     1     2 female       
 3     1     3 female       
 4     2     1 female       
 5     2     2 female       
 6     2     3 male         
 7     3     1 male         
 8     3     2 male         
 9     3     3 male         
10     4     1 male         
11     4     2 male         
12     4     3 male         </code></pre>
</div>
</div>
<p>The updown direction is alike the downup direction, but just the other way around.</p>
<p>Importantly however, all these directions fill also the missing values for individual 3, even though we do not know their actual value. This is why it is always important to evaluate whether you need to fill within a grouping structure. If we apply this here, we can see that both updown and downup give us the correct results:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="co"># Fill missing values</span></span>
<span id="cb29-2"><a href="#cb29-2"></a>dat_fill <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3"></a>    <span class="co"># Arrange for grouping</span></span>
<span id="cb29-4"><a href="#cb29-4"></a>    <span class="fu">arrange</span>(id) <span class="sc">%&gt;%</span></span>
<span id="cb29-5"><a href="#cb29-5"></a>    <span class="co"># Create groups out of individuals</span></span>
<span id="cb29-6"><a href="#cb29-6"></a>    <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span></span>
<span id="cb29-7"><a href="#cb29-7"></a>    <span class="co"># Fill values downwards then upwards</span></span>
<span id="cb29-8"><a href="#cb29-8"></a>    <span class="fu">fill</span>(bio_sex_birth, <span class="at">.direction =</span> <span class="st">"downup"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-9"><a href="#cb29-9"></a>    <span class="co"># Remove grouping structure</span></span>
<span id="cb29-10"><a href="#cb29-10"></a>    <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 3
      id visit bio_sex_birth
   &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;        
 1     1     1 male         
 2     1     2 male         
 3     1     3 male         
 4     2     1 female       
 5     2     2 female       
 6     2     3 female       
 7     3     1 &lt;NA&gt;         
 8     3     2 &lt;NA&gt;         
 9     3     3 &lt;NA&gt;         
10     4     1 male         
11     4     2 male         
12     4     3 male         </code></pre>
</div>
</div>
<p>There are also cases where we are only interested in filling values in a single direction only, such as when a measurement should only be available from a certain point onwards.</p>
</section>
</section>
<section id="exercises" class="level2">
<h2 class="anchored" data-anchor-id="exercises">Exercises</h2>
<p>For these exercises, we will use the <code>storms</code> dataset available in <code>{dplyr}</code>.</p>
<section id="continue-storm-category" class="level3">
<h3 class="anchored" data-anchor-id="continue-storm-category">1. Continue storm category</h3>
<p>Imagine that we want to say that a storm keeps their hurricane category, even after it ceases to be a hurricane. Tidy the data to portray this.</p>
<div class="cell">
<details class="code-fold">
<summary>Answer</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="co"># Fill the category downwards in grouped data</span></span>
<span id="cb31-2"><a href="#cb31-2"></a>storms <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="#cb31-3"></a>    <span class="co"># Arrange for grouping</span></span>
<span id="cb31-4"><a href="#cb31-4"></a>    <span class="fu">arrange</span>(name) <span class="sc">%&gt;%</span></span>
<span id="cb31-5"><a href="#cb31-5"></a>    <span class="co"># Group per storm</span></span>
<span id="cb31-6"><a href="#cb31-6"></a>    <span class="fu">group_by</span>(name) <span class="sc">%&gt;%</span></span>
<span id="cb31-7"><a href="#cb31-7"></a>    <span class="co"># Fill category downwards only</span></span>
<span id="cb31-8"><a href="#cb31-8"></a>    <span class="fu">fill</span>(category, <span class="at">.direction =</span> <span class="st">"down"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-9"><a href="#cb31-9"></a>    <span class="co"># Remove grouping structure</span></span>
<span id="cb31-10"><a href="#cb31-10"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb31-11"><a href="#cb31-11"></a>    <span class="do">## Only to show what answer should look like</span></span>
<span id="cb31-12"><a href="#cb31-12"></a>    <span class="co"># Show storm Gladys as an example</span></span>
<span id="cb31-13"><a href="#cb31-13"></a>    <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"Gladys"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-14"><a href="#cb31-14"></a>    <span class="co"># Print all rows</span></span>
<span id="cb31-15"><a href="#cb31-15"></a>    <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">46</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 46 × 13
   name    year month   day  hour   lat  long status     category  wind pressure
   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;         &lt;dbl&gt; &lt;int&gt;    &lt;int&gt;
 1 Gladys  1975     9    22    18  10.3 -34.8 tropical …       NA    25     1012
 2 Gladys  1975     9    23     0  10.6 -35.8 tropical …       NA    25     1012
 3 Gladys  1975     9    23     6  11   -36.7 tropical …       NA    25     1012
 4 Gladys  1975     9    23    12  11.4 -37.4 tropical …       NA    25     1012
 5 Gladys  1975     9    23    18  11.7 -38.2 tropical …       NA    30     1010
 6 Gladys  1975     9    24     0  12.1 -38.8 tropical …       NA    30     1010
 7 Gladys  1975     9    24     6  12.4 -39.6 tropical …       NA    30     1010
 8 Gladys  1975     9    24    12  12.9 -40   tropical …       NA    30     1010
 9 Gladys  1975     9    24    18  13.5 -40.4 tropical …       NA    35     1005
10 Gladys  1975     9    25     0  14.2 -41   tropical …       NA    40     1005
11 Gladys  1975     9    25     6  14.8 -42   tropical …       NA    50     1000
12 Gladys  1975     9    25    12  15.4 -43   tropical …       NA    60     1000
13 Gladys  1975     9    25    18  15.8 -44   hurricane         1    65      990
14 Gladys  1975     9    26     0  16.2 -45   hurricane         1    65      990
15 Gladys  1975     9    26     6  16.4 -46.1 hurricane         1    65      990
16 Gladys  1975     9    26    12  16.6 -47.7 hurricane         1    65      990
17 Gladys  1975     9    26    18  16.8 -49.3 hurricane         1    65      990
18 Gladys  1975     9    27     0  17.1 -50.7 hurricane         1    65      990
19 Gladys  1975     9    27     6  17.6 -52.2 hurricane         1    65      990
20 Gladys  1975     9    27    12  18.2 -53.7 hurricane         1    65      990
21 Gladys  1975     9    27    18  18.8 -55.1 hurricane         1    65      990
22 Gladys  1975     9    28     0  19.4 -56.4 hurricane         1    65      992
23 Gladys  1975     9    28     6  19.6 -57.4 hurricane         1    65      992
24 Gladys  1975     9    28    12  19.8 -58.2 hurricane         1    65     1000
25 Gladys  1975     9    28    18  20.3 -59.3 hurricane         1    65      998
26 Gladys  1975     9    29     0  21.2 -60.3 hurricane         1    65      995
27 Gladys  1975     9    29     6  22.1 -61.4 hurricane         1    70      990
28 Gladys  1975     9    29    12  23   -62.6 hurricane         1    70      990
29 Gladys  1975     9    29    18  23.6 -63.9 hurricane         1    75      985
30 Gladys  1975     9    30     0  24.1 -65.2 hurricane         1    80      975
31 Gladys  1975     9    30     6  24.6 -66.5 hurricane         1    80      975
32 Gladys  1975     9    30    12  25.1 -67.9 hurricane         1    80      975
33 Gladys  1975     9    30    18  25.6 -69.3 hurricane         1    80      975
34 Gladys  1975    10     1     0  26.1 -70.6 hurricane         1    80      975
35 Gladys  1975    10     1     6  26.8 -71.7 hurricane         1    80      975
36 Gladys  1975    10     1    12  27.9 -72.4 hurricane         1    80      975
37 Gladys  1975    10     1    18  29.4 -73   hurricane         2    90      969
38 Gladys  1975    10     2     0  31   -73   hurricane         3   100      954
39 Gladys  1975    10     2     6  32.9 -72.1 hurricane         3   110      942
40 Gladys  1975    10     2    12  35.3 -69.8 hurricane         4   120      939
41 Gladys  1975    10     2    18  37.8 -67   hurricane         4   120      939
42 Gladys  1975    10     3     0  40.8 -62.6 hurricane         3   110      950
43 Gladys  1975    10     3     6  43.7 -57   hurricane         2    85      960
44 Gladys  1975    10     3    12  46.6 -50.6 hurricane         2    85      960
45 Gladys  1975    10     3    18  50.5 -45.5 extratrop…        2    75      975
46 Gladys  1975    10     4     0  55   -40   extratrop…        2    65      980
# ℹ 2 more variables: tropicalstorm_force_diameter &lt;int&gt;,
#   hurricane_force_diameter &lt;int&gt;</code></pre>
</div>
</div>
</section>
<section id="indicate-non-hurricanes" class="level3">
<h3 class="anchored" data-anchor-id="indicate-non-hurricanes">2. Indicate non-hurricanes</h3>
<p>As an alternative, set category to -1 if the storm was not a hurricane (and therefore the category is <code>NA</code>).</p>
<div class="cell">
<details class="code-fold">
<summary>Answer</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="co"># Set NA's to -1</span></span>
<span id="cb33-2"><a href="#cb33-2"></a>storms_replaced <span class="ot">&lt;-</span> <span class="fu">replace_na</span>(storms, <span class="fu">list</span>(<span class="at">category =</span> <span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb33-3"><a href="#cb33-3"></a></span>
<span id="cb33-4"><a href="#cb33-4"></a><span class="co"># See categories in storms_replaced</span></span>
<span id="cb33-5"><a href="#cb33-5"></a><span class="fu">table</span>(storms_replaced[[<span class="st">"category"</span>]], <span class="at">useNA =</span> <span class="st">"always"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
   -1     1     2     3     4     5  &lt;NA&gt; 
14734  2548   993   593   553   116     0 </code></pre>
</div>
</div>
</section>
</section>
<section id="next-topic" class="level2">
<h2 class="anchored" data-anchor-id="next-topic">Next topic</h2>
<p>Now that we have seen how we tidy our data, the last thing left for us to discuss in the tidyverse is how to combine all these functions into efficient pipelines using <code>{magrittr}</code> and the pipe (<code>%&gt;%</code>).</p>
<p><strong>Next:</strong> <a href="./magrittr.html">Magrittr</a></p>


</section>

=======
</header>




>>>>>>> Stashed changes
</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
<<<<<<< Updated upstream
  const onCopySuccess = function(e) {
=======
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
>>>>>>> Stashed changes
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
<<<<<<< Updated upstream
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/rjjanse\.github\.io\/rt\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
=======
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
>>>>>>> Stashed changes
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
<<<<<<< Updated upstream
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
=======
      placement: 'bottom-start'
    };
>>>>>>> Stashed changes
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
<<<<<<< Updated upstream
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
=======
      return note.innerHTML;
>>>>>>> Stashed changes
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
<<<<<<< Updated upstream
            div.style.left = 0;
=======
>>>>>>> Stashed changes
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
<<<<<<< Updated upstream
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
=======
>>>>>>> Stashed changes
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



<<<<<<< Updated upstream

=======
>>>>>>> Stashed changes
</body></html>